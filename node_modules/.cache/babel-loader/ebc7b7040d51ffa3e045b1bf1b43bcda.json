{"ast":null,"code":"import _regeneratorRuntime from\"/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import config from'../config/config.json';var docs={getAllDocs:function(){var _getAllDocs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token,user){var response,result,filteredRes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(config.base_url,\"/documents\"),{headers:{\"x-access-token\":token}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;_context.next=8;return docs.filterDocs(result,user);case 8:filteredRes=_context.sent;return _context.abrupt(\"return\",filteredRes);case 10:case\"end\":return _context.stop();}}},_callee);}));function getAllDocs(_x,_x2){return _getAllDocs.apply(this,arguments);}return getAllDocs;}(),getOneDoc:function(){var _getOneDoc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(title,token){var response,result,currentDoc;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(config.base_url,\"/documents\"),{headers:{\"x-access-token\":token}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:result=_context2.sent;currentDoc={};result.forEach(function(arrayitem){if(arrayitem.title===title){currentDoc=arrayitem;}});return _context2.abrupt(\"return\",currentDoc);case 9:case\"end\":return _context2.stop();}}},_callee2);}));function getOneDoc(_x3,_x4){return _getOneDoc.apply(this,arguments);}return getOneDoc;}(),saveDoc:function(){var _saveDoc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(title,content,token,user){var request;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(user);request={method:'POST',headers:{'Content-Type':'application/json','x-access-token':token},body:JSON.stringify({title:title,content:content,user:user.email})};fetch(\"\".concat(config.base_url,\"/documents\"),request).then(function(response){return response.json();});case 3:case\"end\":return _context3.stop();}}},_callee3);}));function saveDoc(_x5,_x6,_x7,_x8){return _saveDoc.apply(this,arguments);}return saveDoc;}(),filterDocs:function(){var _filterDocs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(docs,user){var filteredDocs;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:filteredDocs=docs.filter(function(doc){return doc.authUser===user.email;});return _context4.abrupt(\"return\",filteredDocs);case 2:case\"end\":return _context4.stop();}}},_callee4);}));function filterDocs(_x9,_x10){return _filterDocs.apply(this,arguments);}return filterDocs;}()};export default docs;","map":{"version":3,"names":["config","docs","getAllDocs","token","user","fetch","base_url","headers","response","json","result","filterDocs","filteredRes","getOneDoc","title","currentDoc","forEach","arrayitem","saveDoc","content","console","log","request","method","body","JSON","stringify","email","then","filteredDocs","filter","doc","authUser"],"sources":["/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/src/models/docs.js"],"sourcesContent":["import config from '../config/config.json';\n\n\nconst docs = {\n    getAllDocs: async function getAllDocs (token, user) {\n        const response = await fetch(`${config.base_url}/documents`, {\n            headers: {\n                \"x-access-token\": token,\n            },\n        });\n        const result = await response.json();\n        const filteredRes = await docs.filterDocs(result, user);\n        return filteredRes;\n    },\n\n    getOneDoc: async function getOneDoc (title, token) {\n        const response = await fetch(`${config.base_url}/documents`, {\n            headers: {\n                \"x-access-token\": token,\n            }\n        });\n        const result = await response.json();\n        let currentDoc = {};\n        result.forEach(function (arrayitem) {\n            if (arrayitem.title === title) {\n                currentDoc =  arrayitem;\n            }\n        });\n        \n        return currentDoc;\n    },\n\n    saveDoc: async function saveDoc(title, content, token, user) {\n        console.log(user);\n        const request = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'x-access-token': token\n            },\n            body: JSON.stringify({\n                title: title, \n                content: content,\n                user: user.email\n            })\n        };\n\n        fetch(`${config.base_url}/documents`, request)\n            .then(response => response.json());\n    },\n\n    filterDocs: async function filterDocs(docs, user) {\n        const filteredDocs = docs.filter(doc => doc.authUser === user.email);\n\n        return filteredDocs\n    }\n}\n\nexport default docs;"],"mappings":"sSAAA,MAAOA,OAAP,KAAmB,uBAAnB,CAGA,GAAMC,KAAI,CAAG,CACTC,UAAU,sFAAE,iBAA2BC,KAA3B,CAAkCC,IAAlC,0KACeC,MAAK,WAAIL,MAAM,CAACM,QAAX,eAAiC,CACzDC,OAAO,CAAE,CACL,iBAAkBJ,KADb,CADgD,CAAjC,CADpB,QACFK,QADE,qCAMaA,SAAQ,CAACC,IAAT,EANb,QAMFC,MANE,qCAOkBT,KAAI,CAACU,UAAL,CAAgBD,MAAhB,CAAwBN,IAAxB,CAPlB,QAOFQ,WAPE,+CAQDA,WARC,yDAAF,WAAiBV,WAAjB,yDAAiBA,WAAjB,IADD,CAYTW,SAAS,qFAAE,kBAA0BC,KAA1B,CAAiCX,KAAjC,8KACgBE,MAAK,WAAIL,MAAM,CAACM,QAAX,eAAiC,CACzDC,OAAO,CAAE,CACL,iBAAkBJ,KADb,CADgD,CAAjC,CADrB,QACDK,QADC,uCAMcA,SAAQ,CAACC,IAAT,EANd,QAMDC,MANC,gBAOHK,UAPG,CAOU,EAPV,CAQPL,MAAM,CAACM,OAAP,CAAe,SAAUC,SAAV,CAAqB,CAChC,GAAIA,SAAS,CAACH,KAAV,GAAoBA,KAAxB,CAA+B,CAC3BC,UAAU,CAAIE,SAAd,CACH,CACJ,CAJD,EARO,iCAcAF,UAdA,0DAAF,WAAiBF,UAAjB,yDAAiBA,UAAjB,IAZA,CA6BTK,OAAO,mFAAE,kBAAuBJ,KAAvB,CAA8BK,OAA9B,CAAuChB,KAAvC,CAA8CC,IAA9C,oIACLgB,OAAO,CAACC,GAAR,CAAYjB,IAAZ,EACMkB,OAFD,CAEW,CACZC,MAAM,CAAE,MADI,CAEZhB,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iBAAkBJ,KAFb,CAFG,CAMZqB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBZ,KAAK,CAAEA,KADU,CAEjBK,OAAO,CAAEA,OAFQ,CAGjBf,IAAI,CAAEA,IAAI,CAACuB,KAHM,CAAf,CANM,CAFX,CAeLtB,KAAK,WAAIL,MAAM,CAACM,QAAX,eAAiCgB,OAAjC,CAAL,CACKM,IADL,CACU,SAAApB,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EADlB,EAfK,wDAAF,WAAiBS,QAAjB,+DAAiBA,QAAjB,IA7BE,CAgDTP,UAAU,sFAAE,kBAA0BV,IAA1B,CAAgCG,IAAhC,yIACFyB,YADE,CACa5B,IAAI,CAAC6B,MAAL,CAAY,SAAAC,GAAG,QAAIA,IAAG,CAACC,QAAJ,GAAiB5B,IAAI,CAACuB,KAA1B,EAAf,CADb,kCAGDE,YAHC,0DAAF,WAAiBlB,WAAjB,2DAAiBA,WAAjB,IAhDD,CAAb,CAuDA,cAAeV,KAAf"},"metadata":{},"sourceType":"module"}