{"ast":null,"code":"import _regeneratorRuntime from\"/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import config from'../config/config.json';var docs={// getAllDocs: async function getAllDocs (token, user) {\n//     const response = await fetch(`${config.base_url}/documents`, {\n//         headers: {\n//             \"x-access-token\": token,\n//         },\n//     });\n//     const result = await response.json();\n//     console.log(result);\n//     const filteredRes = await docs.filterDocs(result, user);\n//     return filteredRes;\n// },\ngetAllDocs:function(){var _getAllDocs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user){var response,result,filteredRes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(config.base_url,\"/graphql\"),{method:'POST',body:JSON.stringify({query:\"{ documents { title content authUser} }\"}),headers:{'Content-Type':'application/json','Accept':'aaplication/json'}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;_context.next=8;return docs.filterDocs(result.data.documents,user);case 8:filteredRes=_context.sent;return _context.abrupt(\"return\",filteredRes);case 10:case\"end\":return _context.stop();}}},_callee);}));function getAllDocs(_x){return _getAllDocs.apply(this,arguments);}return getAllDocs;}(),getOneDoc:function(){var _getOneDoc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(title,token){var response,result,currentDoc;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(config.base_url,\"/documents\"),{headers:{\"x-access-token\":token}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:result=_context2.sent;currentDoc={};result.forEach(function(arrayitem){if(arrayitem.title===title){currentDoc=arrayitem;}});return _context2.abrupt(\"return\",currentDoc);case 9:case\"end\":return _context2.stop();}}},_callee2);}));function getOneDoc(_x2,_x3){return _getOneDoc.apply(this,arguments);}return getOneDoc;}(),saveDoc:function(){var _saveDoc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(title,content,token,user){var request;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(user);request={method:'POST',headers:{'Content-Type':'application/json','x-access-token':token},body:JSON.stringify({title:title,content:content,user:user.email})};fetch(\"\".concat(config.base_url,\"/documents\"),request).then(function(response){return response.json();});case 3:case\"end\":return _context3.stop();}}},_callee3);}));function saveDoc(_x4,_x5,_x6,_x7){return _saveDoc.apply(this,arguments);}return saveDoc;}(),filterDocs:function(){var _filterDocs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(docs,user){var filteredDocs;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// console.log(user);\n// console.log(docs[0].authUser === user.email);\nfilteredDocs=docs.filter(function(doc){return doc.authUser===user.email;});return _context4.abrupt(\"return\",filteredDocs);case 2:case\"end\":return _context4.stop();}}},_callee4);}));function filterDocs(_x8,_x9){return _filterDocs.apply(this,arguments);}return filterDocs;}()};export default docs;","map":{"version":3,"names":["config","docs","getAllDocs","user","fetch","base_url","method","body","JSON","stringify","query","headers","response","json","result","filterDocs","data","documents","filteredRes","getOneDoc","title","token","currentDoc","forEach","arrayitem","saveDoc","content","console","log","request","email","then","filteredDocs","filter","doc","authUser"],"sources":["/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/src/models/docs.js"],"sourcesContent":["import config from '../config/config.json';\n\n\nconst docs = {\n    // getAllDocs: async function getAllDocs (token, user) {\n    //     const response = await fetch(`${config.base_url}/documents`, {\n    //         headers: {\n    //             \"x-access-token\": token,\n    //         },\n    //     });\n    //     const result = await response.json();\n    //     console.log(result);\n    //     const filteredRes = await docs.filterDocs(result, user);\n    //     return filteredRes;\n    // },\n\n    getAllDocs: async function getAllDocs (user) {\n        const response = await fetch(`${config.base_url}/graphql`, {\n            method: 'POST',\n            body: JSON.stringify({ query: \"{ documents { title content authUser} }\" }),\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'aaplication/json'\n            },\n        })\n\n        const result = await response.json();\n        const filteredRes = await docs.filterDocs(result.data.documents, user);\n        return filteredRes;\n    },\n\n    getOneDoc: async function getOneDoc (title, token) {\n        const response = await fetch(`${config.base_url}/documents`, {\n            headers: {\n                \"x-access-token\": token,\n            }\n        });\n        const result = await response.json();\n        let currentDoc = {};\n        result.forEach(function (arrayitem) {\n            if (arrayitem.title === title) {\n                currentDoc =  arrayitem;\n            }\n        });\n        \n        return currentDoc;\n    },\n\n    saveDoc: async function saveDoc(title, content, token, user) {\n        console.log(user);\n        const request = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'x-access-token': token\n            },\n            body: JSON.stringify({\n                title: title, \n                content: content,\n                user: user.email\n            })\n        };\n\n        fetch(`${config.base_url}/documents`, request)\n            .then(response => response.json());\n    },\n\n    filterDocs: async function filterDocs(docs, user) {\n        // console.log(user);\n        // console.log(docs[0].authUser === user.email);\n        const filteredDocs = docs.filter(doc => doc.authUser === user.email);\n        return filteredDocs\n    }\n}\n\nexport default docs;"],"mappings":"kTAAA,MAAOA,OAAP,KAAmB,uBAAnB,CAGA,GAAMC,KAAI,CAAG,CACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAC,UAAU,sFAAE,iBAA2BC,IAA3B,0KACeC,MAAK,WAAIJ,MAAM,CAACK,QAAX,aAA+B,CACvDC,MAAM,CAAE,MAD+C,CAEvDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEC,KAAK,CAAE,yCAAT,CAAf,CAFiD,CAGvDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,SAAU,kBAFL,CAH8C,CAA/B,CADpB,QACFC,QADE,qCAUaA,SAAQ,CAACC,IAAT,EAVb,QAUFC,MAVE,qCAWkBb,KAAI,CAACc,UAAL,CAAgBD,MAAM,CAACE,IAAP,CAAYC,SAA5B,CAAuCd,IAAvC,CAXlB,QAWFe,WAXE,+CAYDA,WAZC,yDAAF,WAAiBhB,WAAjB,qDAAiBA,WAAjB,IAbD,CA4BTiB,SAAS,qFAAE,kBAA0BC,KAA1B,CAAiCC,KAAjC,8KACgBjB,MAAK,WAAIJ,MAAM,CAACK,QAAX,eAAiC,CACzDM,OAAO,CAAE,CACL,iBAAkBU,KADb,CADgD,CAAjC,CADrB,QACDT,QADC,uCAMcA,SAAQ,CAACC,IAAT,EANd,QAMDC,MANC,gBAOHQ,UAPG,CAOU,EAPV,CAQPR,MAAM,CAACS,OAAP,CAAe,SAAUC,SAAV,CAAqB,CAChC,GAAIA,SAAS,CAACJ,KAAV,GAAoBA,KAAxB,CAA+B,CAC3BE,UAAU,CAAIE,SAAd,CACH,CACJ,CAJD,EARO,iCAcAF,UAdA,0DAAF,WAAiBH,UAAjB,yDAAiBA,UAAjB,IA5BA,CA6CTM,OAAO,mFAAE,kBAAuBL,KAAvB,CAA8BM,OAA9B,CAAuCL,KAAvC,CAA8ClB,IAA9C,oIACLwB,OAAO,CAACC,GAAR,CAAYzB,IAAZ,EACM0B,OAFD,CAEW,CACZvB,MAAM,CAAE,MADI,CAEZK,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iBAAkBU,KAFb,CAFG,CAMZd,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBW,KAAK,CAAEA,KADU,CAEjBM,OAAO,CAAEA,OAFQ,CAGjBvB,IAAI,CAAEA,IAAI,CAAC2B,KAHM,CAAf,CANM,CAFX,CAeL1B,KAAK,WAAIJ,MAAM,CAACK,QAAX,eAAiCwB,OAAjC,CAAL,CACKE,IADL,CACU,SAAAnB,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EADlB,EAfK,wDAAF,WAAiBY,QAAjB,+DAAiBA,QAAjB,IA7CE,CAgETV,UAAU,sFAAE,kBAA0Bd,IAA1B,CAAgCE,IAAhC,yIACR;AACA;AACM6B,YAHE,CAGa/B,IAAI,CAACgC,MAAL,CAAY,SAAAC,GAAG,QAAIA,IAAG,CAACC,QAAJ,GAAiBhC,IAAI,CAAC2B,KAA1B,EAAf,CAHb,kCAIDE,YAJC,0DAAF,WAAiBjB,WAAjB,0DAAiBA,WAAjB,IAhED,CAAb,CAwEA,cAAed,KAAf"},"metadata":{},"sourceType":"module"}