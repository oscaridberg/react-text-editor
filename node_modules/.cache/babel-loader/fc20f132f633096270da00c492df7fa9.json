{"ast":null,"code":"import _regeneratorRuntime from\"/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Editor}from'@tinymce/tinymce-react';import React,{useEffect,useRef}from'react';import config from'../config/config.json';import docsModel from'../models/docs';// import { useState } from 'react';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TextEditor(_ref){var currentDoc=_ref.currentDoc,setCurrentDoc=_ref.setCurrentDoc,docs=_ref.docs,setDocs=_ref.setDocs;// const [docs, setDocs] = useState([]);\n// const [currentDoc, setCurrentDoc] = useState([]);\nvar editorRef=useRef(null);var log=function log(){if(editorRef.current){var title=document.getElementById('documentTitle').value;var content=editorRef.current.getContent();var request={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:title,content:content})};fetch(\"\".concat(config.base_url,\"/documents\"),request).then(function(response){return response.json();});}};useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var allDocs;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return docsModel.getAllDocs();case 2:allDocs=_context.sent;setDocs(allDocs);case 4:case\"end\":return _context.stop();}}},_callee);}))();},[]);function fetchDoc(_x){return _fetchDoc.apply(this,arguments);}function _fetchDoc(){_fetchDoc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var title,doc;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:title=event.target.value;_context2.next=3;return docsModel.getOneDoc(title);case 3:doc=_context2.sent;setCurrentDoc(doc);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchDoc.apply(this,arguments);};function handleKeyUp(_x2){return _handleKeyUp.apply(this,arguments);}function _handleKeyUp(){_handleKeyUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setCurrentDoc({_id:currentDoc._id,title:currentDoc.title,content:editorRef.current.getContent()});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _handleKeyUp.apply(this,arguments);};return/*#__PURE__*/_jsxs(\"div\",{className:\"editorContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"appTitle\",children:\"React Text Editor\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolBar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"saveButton\",onClick:log,children:\"Save\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"docDropDown\",onChange:fetchDoc,children:[/*#__PURE__*/_jsx(\"option\",{id:\"docChoice\",value:\"-99\",children:\"Choose a document\"},\"0\"),docs.map(function(doc,index){return/*#__PURE__*/_jsx(\"option\",{value:doc.title,children:doc.title},index);})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"documentTitle\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"documentTitle\",children:\"Document Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"documentTitle\",className:\"titleField\",defaultValue:currentDoc.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"textEditor\",children:/*#__PURE__*/_jsx(Editor,{apiKey:config.api_key,onInit:function onInit(evt,editor){return editorRef.current=editor;},value:currentDoc['content'],onKeyUp:handleKeyUp,init:{height:500,menubar:false,plugins:['advlist','autolink','lists','link','image','charmap','preview','anchor','searchreplace','visualblocks','code','fullscreen','insertdatetime','media','table','code','help','wordcount'],toolbar:'undo redo | blocks | '+'bold italic forecolor | alignleft aligncenter '+'alignright alignjustify | bullist numlist outdent indent | '+'removeformat | help',content_style:'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'}})})]});}","map":{"version":3,"names":["Editor","React","useEffect","useRef","config","docsModel","TextEditor","currentDoc","setCurrentDoc","docs","setDocs","editorRef","log","current","title","document","getElementById","value","content","getContent","request","method","headers","body","JSON","stringify","fetch","base_url","then","response","json","getAllDocs","allDocs","fetchDoc","event","target","getOneDoc","doc","handleKeyUp","_id","map","index","api_key","evt","editor","height","menubar","plugins","toolbar","content_style"],"sources":["/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/src/components/TextEditor.js"],"sourcesContent":["import { Editor } from '@tinymce/tinymce-react';\nimport React, { useEffect, useRef } from 'react';\nimport config from '../config/config.json';\nimport docsModel from '../models/docs';\n// import { useState } from 'react';\n\n\n\nexport default function TextEditor({currentDoc, setCurrentDoc, docs, setDocs}) {\n    // const [docs, setDocs] = useState([]);\n    // const [currentDoc, setCurrentDoc] = useState([]);\n    const editorRef = useRef(null);\n    \n    const log = () => {\n      if (editorRef.current) {\n        const title = document.getElementById('documentTitle').value;\n        const content = editorRef.current.getContent();\n        const request = {\n          method: 'POST',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify({ title: title, content: content })\n        };\n\n        fetch(`${config.base_url}/documents`, request)\n          .then(response => response.json());\n      }\n    };\n\n    useEffect(() => {\n      (async () => {\n          const allDocs = await docsModel.getAllDocs();\n          setDocs(allDocs);\n      })();\n    }, []);\n\n    async function fetchDoc(event) {\n        const title = event.target.value;\n        const doc = await docsModel.getOneDoc(title);\n        setCurrentDoc(doc);\n    };\n\n    async function handleKeyUp(event) {\n        setCurrentDoc({\n          _id: currentDoc._id,\n          title: currentDoc.title, \n          content: editorRef.current.getContent()\n        });\n    };\n\n \n\n    return (\n      <div className=\"editorContainer\">\n        <h1 className='appTitle'>React Text Editor</h1>\n        <div className='toolBar'>\n          <button className='saveButton' onClick={log}>Save</button>\n          <select\n          className='docDropDown'\n          onChange={fetchDoc}\n          >\n          <option id='docChoice' value=\"-99\" key=\"0\">Choose a document</option>\n          {docs.map((doc, index) => <option value={doc.title} key={index}>{doc.title}</option>)}\n          </select>\n        </div>\n\n      <form className='documentTitle'>\n        <label htmlFor=\"documentTitle\">Document Title</label>\n        <input type=\"text\" id=\"documentTitle\" className='titleField' defaultValue={currentDoc.title}></input>\n      </form>\n\n        <div className='textEditor'>\n          <Editor\n            apiKey={config.api_key}\n            onInit={(evt, editor) => editorRef.current = editor}\n            value={currentDoc['content']}\n            onKeyUp={handleKeyUp}\n            init={{\n              height: 500,\n              menubar: false,\n              plugins: [\n                'advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview',\n                'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen',\n                'insertdatetime', 'media', 'table', 'code', 'help', 'wordcount'\n              ],\n              toolbar: 'undo redo | blocks | ' +\n                'bold italic forecolor | alignleft aligncenter ' +\n                'alignright alignjustify | bullist numlist outdent indent | ' +\n                'removeformat | help',\n              content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'\n            }}\n          />\n        </div>\n        \n      </div>\n    );\n  }\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}