{"ast":null,"code":"import _slicedToArray from\"/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./style/App.css';import'./style/TextEditor.css';import React,{useEffect}from'react';import TextEditor from'./components/TextEditor.js';import{useState}from'react';import{io}from\"socket.io-client\";import config from'./config/config.json';import{jsx as _jsx}from\"react/jsx-runtime\";var socket;var SERVER_URL=config.base_url;function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),docs=_useState2[0],setDocs=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),currentDoc=_useState4[0],setCurrentDoc=_useState4[1];console.log('test');useEffect(function(){// console.log(currentDoc.content);\n});useEffect(function(){socket=io(SERVER_URL);socket.emit(\"create\",currentDoc[\"_id\"]);console.log(currentDoc.content);var data={_id:currentDoc['_id'],title:currentDoc['title'],html:currentDoc['content']};socket.emit(\"doc\",data);socket.on(\"doc\",function(data){console.log(data.html);if(currentDoc['content']!=data.html){setCurrentDoc({_id:currentDoc._id,title:currentDoc.title,content:data.html});}});return function(){socket.disconnect();};},[currentDoc]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(TextEditor,{currentDoc:currentDoc,setCurrentDoc:setCurrentDoc,docs:docs,setDocs:setDocs})});}export default App;","map":{"version":3,"names":["React","useEffect","TextEditor","useState","io","config","socket","SERVER_URL","base_url","App","docs","setDocs","currentDoc","setCurrentDoc","console","log","emit","content","data","_id","title","html","on","disconnect"],"sources":["/home/oscar/dbwebb_kurser/jsramverk/react-text-editor/src/App.js"],"sourcesContent":["import './style/App.css';\nimport './style/TextEditor.css'\nimport React, { useEffect } from 'react';\nimport TextEditor from './components/TextEditor.js';\nimport { useState } from 'react';\nimport { io } from \"socket.io-client\";\nimport config from './config/config.json';\n\n\nlet socket;\nconst SERVER_URL = config.base_url;\nfunction App() {\n  const [docs, setDocs] = useState([]);\n  const [currentDoc, setCurrentDoc] = useState([]);\n\n  console.log('test');\n  useEffect(() => {\n    // console.log(currentDoc.content);\n    \n  })\n\n  useEffect(() => {\n    socket = io(SERVER_URL);\n    socket.emit(\"create\", currentDoc[\"_id\"]);\n    console.log(currentDoc.content);\n\n    let data = {\n      _id: currentDoc['_id'],\n      title: currentDoc['title'],\n      html: currentDoc['content']\n    };\n    \n    socket.emit(\"doc\", data);\n\n    socket.on(\"doc\", (data) => {\n      console.log(data.html);\n      if (currentDoc['content'] != data.html) {\n        setCurrentDoc({\n          _id: currentDoc._id,\n          title: currentDoc.title, \n          content: data.html\n        })\n      }\n  });\n\n    return () => {\n      socket.disconnect();\n    }\n  }, [currentDoc]);\n\n  return (\n    <div className=\"App\">\n      <TextEditor currentDoc={currentDoc} setCurrentDoc={setCurrentDoc} docs={docs} setDocs={setDocs} />\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"2IAAA,MAAO,iBAAP,CACA,MAAO,wBAAP,CACA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,WAAP,KAAuB,4BAAvB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,EAAT,KAAmB,kBAAnB,CACA,MAAOC,OAAP,KAAmB,sBAAnB,C,2CAGA,GAAIC,OAAJ,CACA,GAAMC,WAAU,CAAGF,MAAM,CAACG,QAA1B,CACA,QAASC,IAAT,EAAe,CACb,cAAwBN,QAAQ,CAAC,EAAD,CAAhC,wCAAOO,IAAP,eAAaC,OAAb,eACA,eAAoCR,QAAQ,CAAC,EAAD,CAA5C,yCAAOS,UAAP,eAAmBC,aAAnB,eAEAC,OAAO,CAACC,GAAR,CAAY,MAAZ,EACAd,SAAS,CAAC,UAAM,CACd;AAED,CAHQ,CAAT,CAKAA,SAAS,CAAC,UAAM,CACdK,MAAM,CAAGF,EAAE,CAACG,UAAD,CAAX,CACAD,MAAM,CAACU,IAAP,CAAY,QAAZ,CAAsBJ,UAAU,CAAC,KAAD,CAAhC,EACAE,OAAO,CAACC,GAAR,CAAYH,UAAU,CAACK,OAAvB,EAEA,GAAIC,KAAI,CAAG,CACTC,GAAG,CAAEP,UAAU,CAAC,KAAD,CADN,CAETQ,KAAK,CAAER,UAAU,CAAC,OAAD,CAFR,CAGTS,IAAI,CAAET,UAAU,CAAC,SAAD,CAHP,CAAX,CAMAN,MAAM,CAACU,IAAP,CAAY,KAAZ,CAAmBE,IAAnB,EAEAZ,MAAM,CAACgB,EAAP,CAAU,KAAV,CAAiB,SAACJ,IAAD,CAAU,CACzBJ,OAAO,CAACC,GAAR,CAAYG,IAAI,CAACG,IAAjB,EACA,GAAIT,UAAU,CAAC,SAAD,CAAV,EAAyBM,IAAI,CAACG,IAAlC,CAAwC,CACtCR,aAAa,CAAC,CACZM,GAAG,CAAEP,UAAU,CAACO,GADJ,CAEZC,KAAK,CAAER,UAAU,CAACQ,KAFN,CAGZH,OAAO,CAAEC,IAAI,CAACG,IAHF,CAAD,CAAb,CAKD,CACJ,CATC,EAWA,MAAO,WAAM,CACXf,MAAM,CAACiB,UAAP,GACD,CAFD,CAGD,CA3BQ,CA2BN,CAACX,UAAD,CA3BM,CAAT,CA6BA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,KAAC,UAAD,EAAY,UAAU,CAAEA,UAAxB,CAAoC,aAAa,CAAEC,aAAnD,CAAkE,IAAI,CAAEH,IAAxE,CAA8E,OAAO,CAAEC,OAAvF,EADF,EADF,CAKD,CAED,cAAeF,IAAf"},"metadata":{},"sourceType":"module"}