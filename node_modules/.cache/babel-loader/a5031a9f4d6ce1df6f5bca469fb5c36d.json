{"ast":null,"code":"import _regeneratorRuntime from\"/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from'react';import authModel from'../models/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){var setToken=_ref.setToken,user=_ref.user,setUser=_ref.setUser;function changeHandler(event){var newObject={};newObject[event.target.name]=event.target.value;setUser(_objectSpread(_objectSpread({},user),newObject));};function register(){return _register.apply(this,arguments);}function _register(){_register=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return authModel.register(user);case 2:_context.next=4;return login();case 4:case\"end\":return _context.stop();}}},_callee);}));return _register.apply(this,arguments);};function login(){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return authModel.login(user);case 2:result=_context2.sent;if(result.data){setToken(result.data.token);}else{console.log('invalid user');}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _login.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"loginContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login or register\"}),/*#__PURE__*/_jsx(\"p\",{className:\"loginTitle\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"p\",{className:\"loginTitle\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"button\",{className:\"registerButton\",onClick:register,children:\"Register\"}),/*#__PURE__*/_jsx(\"button\",{className:\"loginButton\",onClick:login,children:\"Login\"})]});}","map":{"version":3,"names":["useState","authModel","Login","setToken","user","setUser","changeHandler","event","newObject","target","name","value","register","login","result","data","token","console","log"],"sources":["/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/src/components/Login.js"],"sourcesContent":["import { useState } from 'react';\nimport authModel from '../models/auth';\n\nexport default function Login({setToken, user, setUser}) {\n\n    function changeHandler(event) {\n        let newObject = {};\n        newObject[event.target.name] = event.target.value;\n\n        setUser({...user, ...newObject});\n    };\n\n    async function register() {\n        await authModel.register(user);\n        await login();\n    };\n\n    async function login() {\n        const result = await authModel.login(user);\n        if (result.data) {\n            setToken(result.data.token);\n        } else {\n            console.log('invalid user');\n        }\n    }\n\n    return (\n        <div className='loginContainer'>\n        <h1>Login or register</h1>\n            <p className='loginTitle'>Email:</p>\n            <input type=\"email\" name=\"email\" onChange={changeHandler} />\n\n            <p className='loginTitle'>Password:</p>\n            <input type=\"password\" name=\"password\" onChange={changeHandler} />\n\n            <button className='registerButton' onClick={register} >Register</button>\n            <button className='loginButton' onClick={login} >Login</button>\n        </div>\n    );\n}"],"mappings":"kcAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,UAAP,KAAsB,gBAAtB,C,wFAEA,cAAe,SAASC,MAAT,MAA0C,IAA1BC,SAA0B,MAA1BA,QAA0B,CAAhBC,IAAgB,MAAhBA,IAAgB,CAAVC,OAAU,MAAVA,OAAU,CAErD,QAASC,cAAT,CAAuBC,KAAvB,CAA8B,CAC1B,GAAIC,UAAS,CAAG,EAAhB,CACAA,SAAS,CAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,CAAT,CAA+BH,KAAK,CAACE,MAAN,CAAaE,KAA5C,CAEAN,OAAO,gCAAKD,IAAL,EAAcI,SAAd,EAAP,CACH,EAPoD,QAStCI,SATsC,oIASrD,2JACUX,UAAS,CAACW,QAAV,CAAmBR,IAAnB,CADV,8BAEUS,MAAK,EAFf,uDATqD,2CAYpD,CAZoD,QActCA,MAdsC,2HAcrD,4KACyBZ,UAAS,CAACY,KAAV,CAAgBT,IAAhB,CADzB,QACUU,MADV,gBAEI,GAAIA,MAAM,CAACC,IAAX,CAAiB,CACbZ,QAAQ,CAACW,MAAM,CAACC,IAAP,CAAYC,KAAb,CAAR,CACH,CAFD,IAEO,CACHC,OAAO,CAACC,GAAR,CAAY,cAAZ,EACH,CANL,wDAdqD,wCAuBrD,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACA,yCADA,cAEI,UAAG,SAAS,CAAC,YAAb,oBAFJ,cAGI,cAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,OAAzB,CAAiC,QAAQ,CAAEZ,aAA3C,EAHJ,cAKI,UAAG,SAAS,CAAC,YAAb,uBALJ,cAMI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,CAAuC,QAAQ,CAAEA,aAAjD,EANJ,cAQI,eAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAEM,QAA5C,sBARJ,cASI,eAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAEC,KAAzC,mBATJ,GADJ,CAaH"},"metadata":{},"sourceType":"module"}