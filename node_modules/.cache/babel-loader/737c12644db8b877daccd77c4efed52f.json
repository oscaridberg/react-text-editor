{"ast":null,"code":"import _regeneratorRuntime from\"/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Editor}from'@tinymce/tinymce-react';import React,{useEffect,useRef}from'react';import config from'../config/config.json';import docsModel from'../models/docs';// import { useState } from 'react';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TextEditor(_ref){var currentDoc=_ref.currentDoc,setCurrentDoc=_ref.setCurrentDoc,docs=_ref.docs,fetchDoc=_ref.fetchDoc,saveDoc=_ref.saveDoc;var editorRef=useRef(null);var save=function save(){if(editorRef.current){var title=document.getElementById('documentTitle').value;var content=editorRef.current.getContent();saveDoc(title,content);}};function handleKeyUp(_x){return _handleKeyUp.apply(this,arguments);}function _handleKeyUp(){_handleKeyUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCurrentDoc({_id:currentDoc._id,title:currentDoc.title,content:editorRef.current.getContent()});case 1:case\"end\":return _context.stop();}}},_callee);}));return _handleKeyUp.apply(this,arguments);};return/*#__PURE__*/_jsxs(\"div\",{className:\"editorContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolBar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"saveButton\",onClick:save,children:\"Save\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"docDropDown\",onChange:fetchDoc,children:[/*#__PURE__*/_jsx(\"option\",{id:\"docChoice\",value:\"-99\",children:\"Choose a document\"},\"0\"),docs.length?/*#__PURE__*/_jsx(_Fragment,{children:docs.map(function(doc,index){return/*#__PURE__*/_jsx(\"option\",{value:doc.title,children:doc.title},index);})}):/*#__PURE__*/_jsx(\"option\",{})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"documentTitle\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"documentTitle\",children:\"Document Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"documentTitle\",className:\"titleField\",defaultValue:currentDoc.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"textEditor\",children:/*#__PURE__*/_jsx(Editor,{apiKey:config.api_key,onInit:function onInit(evt,editor){return editorRef.current=editor;},value:currentDoc['content'],onKeyUp:handleKeyUp,init:{height:500,menubar:false,plugins:['advlist','autolink','lists','link','image','charmap','preview','anchor','searchreplace','visualblocks','code','fullscreen','insertdatetime','media','table','code','help','wordcount'],toolbar:'undo redo | blocks | '+'bold italic forecolor | alignleft aligncenter '+'alignright alignjustify | bullist numlist outdent indent | '+'removeformat | help',content_style:'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'}})})]});}","map":{"version":3,"names":["Editor","React","useEffect","useRef","config","docsModel","TextEditor","currentDoc","setCurrentDoc","docs","fetchDoc","saveDoc","editorRef","save","current","title","document","getElementById","value","content","getContent","handleKeyUp","event","_id","length","map","doc","index","api_key","evt","editor","height","menubar","plugins","toolbar","content_style"],"sources":["/home/oscaridberg/dbwebb-kurser/jsramverk/react-text-editor/src/components/TextEditor.js"],"sourcesContent":["import { Editor } from '@tinymce/tinymce-react';\nimport React, { useEffect, useRef } from 'react';\nimport config from '../config/config.json';\nimport docsModel from '../models/docs';\n// import { useState } from 'react';\n\n\n\nexport default function TextEditor({currentDoc, setCurrentDoc, docs, fetchDoc, saveDoc}) {\n    const editorRef = useRef(null);\n    \n    const save = () => {\n      if (editorRef.current) {\n        const title = document.getElementById('documentTitle').value;\n        const content = editorRef.current.getContent();\n        saveDoc(title, content);\n      }\n    };\n\n    async function handleKeyUp(event) {\n        setCurrentDoc({\n          _id: currentDoc._id,\n          title: currentDoc.title, \n          content: editorRef.current.getContent()\n        });\n    };\n\n \n\n    return (\n      <div className=\"editorContainer\">\n        <div className='toolBar'>\n          <button className='saveButton' onClick={save}>Save</button>\n          <select\n          className='docDropDown'\n          onChange={fetchDoc}\n          >\n          <option id='docChoice' value=\"-99\" key=\"0\">Choose a document</option>\n          {docs.length ?\n            <>\n            {docs.map((doc, index) => <option value={doc.title} key={index}>{doc.title}</option>)}\n            </>\n          :\n          <option></option>\n          }\n          </select>\n        </div>\n\n      <form className='documentTitle'>\n        <label htmlFor=\"documentTitle\">Document Title</label>\n        <input type=\"text\" id=\"documentTitle\" className='titleField' defaultValue={currentDoc.title}></input>\n      </form>\n\n        <div className='textEditor'>\n          <Editor\n            apiKey={config.api_key}\n            onInit={(evt, editor) => editorRef.current = editor}\n            value={currentDoc['content']}\n            onKeyUp={handleKeyUp}\n            init={{\n              height: 500,\n              menubar: false,\n              plugins: [\n                'advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview',\n                'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen',\n                'insertdatetime', 'media', 'table', 'code', 'help', 'wordcount'\n              ],\n              toolbar: 'undo redo | blocks | ' +\n                'bold italic forecolor | alignleft aligncenter ' +\n                'alignright alignjustify | bullist numlist outdent indent | ' +\n                'removeformat | help',\n              content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'\n            }}\n          />\n        </div>\n        \n      </div>\n    );\n  }\n\n"],"mappings":"kTAAA,OAASA,MAAT,KAAuB,wBAAvB,CACA,MAAOC,MAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,KAAyC,OAAzC,CACA,MAAOC,OAAP,KAAmB,uBAAnB,CACA,MAAOC,UAAP,KAAsB,gBAAtB,CACA;6IAIA,cAAe,SAASC,WAAT,MAA0E,IAArDC,WAAqD,MAArDA,UAAqD,CAAzCC,aAAyC,MAAzCA,aAAyC,CAA1BC,IAA0B,MAA1BA,IAA0B,CAApBC,QAAoB,MAApBA,QAAoB,CAAVC,OAAU,MAAVA,OAAU,CACrF,GAAMC,UAAS,CAAGT,MAAM,CAAC,IAAD,CAAxB,CAEA,GAAMU,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,GAAID,SAAS,CAACE,OAAd,CAAuB,CACrB,GAAMC,MAAK,CAAGC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAAvD,CACA,GAAMC,QAAO,CAAGP,SAAS,CAACE,OAAV,CAAkBM,UAAlB,EAAhB,CACAT,OAAO,CAACI,KAAD,CAAQI,OAAR,CAAP,CACD,CACF,CAND,CAHqF,QAWtEE,YAXsE,+IAWrF,iBAA2BC,KAA3B,oHACId,aAAa,CAAC,CACZe,GAAG,CAAEhB,UAAU,CAACgB,GADJ,CAEZR,KAAK,CAAER,UAAU,CAACQ,KAFN,CAGZI,OAAO,CAAEP,SAAS,CAACE,OAAV,CAAkBM,UAAlB,EAHG,CAAD,CAAb,CADJ,sDAXqF,8CAiBpF,CAID,mBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,aAAK,SAAS,CAAC,SAAf,wBACE,eAAQ,SAAS,CAAC,YAAlB,CAA+B,OAAO,CAAEP,IAAxC,kBADF,cAEE,gBACA,SAAS,CAAC,aADV,CAEA,QAAQ,CAAEH,QAFV,wBAIA,eAAQ,EAAE,CAAC,WAAX,CAAuB,KAAK,CAAC,KAA7B,+BAAuC,GAAvC,CAJA,CAKCD,IAAI,CAACe,MAAL,cACC,yBACCf,IAAI,CAACgB,GAAL,CAAS,SAACC,GAAD,CAAMC,KAAN,qBAAgB,eAAQ,KAAK,CAAED,GAAG,CAACX,KAAnB,UAAuCW,GAAG,CAACX,KAA3C,EAA+BY,KAA/B,CAAhB,EAAT,CADD,EADD,cAKD,iBAVA,GAFF,GADF,cAkBA,cAAM,SAAS,CAAC,eAAhB,wBACE,cAAO,OAAO,CAAC,eAAf,4BADF,cAEE,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,eAAtB,CAAsC,SAAS,CAAC,YAAhD,CAA6D,YAAY,CAAEpB,UAAU,CAACQ,KAAtF,EAFF,GAlBA,cAuBE,YAAK,SAAS,CAAC,YAAf,uBACE,KAAC,MAAD,EACE,MAAM,CAAEX,MAAM,CAACwB,OADjB,CAEE,MAAM,CAAE,gBAACC,GAAD,CAAMC,MAAN,QAAiBlB,UAAS,CAACE,OAAV,CAAoBgB,MAArC,EAFV,CAGE,KAAK,CAAEvB,UAAU,CAAC,SAAD,CAHnB,CAIE,OAAO,CAAEc,WAJX,CAKE,IAAI,CAAE,CACJU,MAAM,CAAE,GADJ,CAEJC,OAAO,CAAE,KAFL,CAGJC,OAAO,CAAE,CACP,SADO,CACI,UADJ,CACgB,OADhB,CACyB,MADzB,CACiC,OADjC,CAC0C,SAD1C,CACqD,SADrD,CAEP,QAFO,CAEG,eAFH,CAEoB,cAFpB,CAEoC,MAFpC,CAE4C,YAF5C,CAGP,gBAHO,CAGW,OAHX,CAGoB,OAHpB,CAG6B,MAH7B,CAGqC,MAHrC,CAG6C,WAH7C,CAHL,CAQJC,OAAO,CAAE,wBACP,gDADO,CAEP,6DAFO,CAGP,qBAXE,CAYJC,aAAa,CAAE,iEAZX,CALR,EADF,EAvBF,GADF,CAiDD"},"metadata":{},"sourceType":"module"}